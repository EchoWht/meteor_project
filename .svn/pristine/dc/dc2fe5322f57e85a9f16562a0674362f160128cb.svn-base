var require = meteorInstall({"client":{"templates":{"application":{"template.layout.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/application/template.layout.js                                                //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("layout");                                                                   // 2
Template["layout"] = new Template("Template.layout", (function() {                                // 3
  var view = this;                                                                                // 4
  return HTML.DIV({                                                                               // 5
    "class": "container"                                                                          // 6
  }, "\n        ", Spacebars.include(view.lookupTemplate("header")), "\n        ", HTML.DIV({     // 7
    id: "main",                                                                                   // 8
    "class": "row-fluid"                                                                          // 9
  }, "\n            ", Spacebars.include(view.lookupTemplate("yield")), "\n        "), "\n    ");
}));                                                                                              // 11
                                                                                                  // 12
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.not_found.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/application/template.not_found.js                                             //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("notFound");                                                                 // 2
Template["notFound"] = new Template("Template.notFound", (function() {                            // 3
  var view = this;                                                                                // 4
  return HTML.Raw('<div class="not-found jumbotron">\n        <h2>404</h2>\n        <p>Sorry, we couldn\'t find a page at this address. 抱歉，我们无法找到该页面。</p>\n    </div>');
}));                                                                                              // 6
                                                                                                  // 7
////////////////////////////////////////////////////////////////////////////////////////////////////

},"layout.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/application/layout.js                                                         //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
/**                                                                                               //
 * Created by Administrator on 2016-06-10.                                                        //
 */                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////

}},"includes":{"template.access_denied.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/includes/template.access_denied.js                                            //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("accessDenied");                                                             // 2
Template["accessDenied"] = new Template("Template.accessDenied", (function() {                    // 3
  var view = this;                                                                                // 4
  return HTML.Raw('<div class="access-denied jumbotron">\n        <h2>Access Denied</h2>\n        <p>You can\'t get here! Please log in.</p>\n    </div>');
}));                                                                                              // 6
                                                                                                  // 7
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.header.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/includes/template.header.js                                                   //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("header");                                                                   // 2
Template["header"] = new Template("Template.header", (function() {                                // 3
  var view = this;                                                                                // 4
  return HTML.NAV({                                                                               // 5
    "class": "navbar navbar-default",                                                             // 6
    role: "navigation"                                                                            // 7
  }, "\n        ", HTML.DIV({                                                                     // 8
    "class": "navbar-header"                                                                      // 9
  }, "\n            ", HTML.Raw('<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>'), "\n            ", HTML.A({
    "class": "navbar-brand",                                                                      // 11
    href: function() {                                                                            // 12
      return Spacebars.mustache(view.lookup("pathFor"), "postsList");                             // 13
    }                                                                                             // 14
  }, "Microscope"), "\n        "), "\n        ", HTML.DIV({                                       // 15
    "class": "collapse navbar-collapse",                                                          // 16
    id: "navigation"                                                                              // 17
  }, "\n            ", HTML.UL({                                                                  // 18
    "class": "nav navbar-nav navbar-right"                                                        // 19
  }, "\n                ", Blaze.If(function() {                                                  // 20
    return Spacebars.call(view.lookup("currentUser"));                                            // 21
  }, function() {                                                                                 // 22
    return HTML.LI(HTML.A({                                                                       // 23
      href: function() {                                                                          // 24
        return Spacebars.mustache(view.lookup("pathFor"), "postSubmit");                          // 25
      }                                                                                           // 26
    }, "Submit Post"));                                                                           // 27
  }), "\n            "), "\n            ", HTML.UL({                                              // 28
    "class": "nav navbar-nav navbar-right"                                                        // 29
  }, "\n                ", Spacebars.include(view.lookupTemplate("loginButtons")), "\n            "), "\n        "), "\n    ");
}));                                                                                              // 31
                                                                                                  // 32
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.loading.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/includes/template.loading.js                                                  //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("loading");                                                                  // 2
Template["loading"] = new Template("Template.loading", (function() {                              // 3
  var view = this;                                                                                // 4
  return "loading````";                                                                           // 5
}));                                                                                              // 6
                                                                                                  // 7
////////////////////////////////////////////////////////////////////////////////////////////////////

}},"posts":{"template.post_item.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/template.post_item.js                                                   //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("postItem");                                                                 // 2
Template["postItem"] = new Template("Template.postItem", (function() {                            // 3
  var view = this;                                                                                // 4
  return HTML.DIV({                                                                               // 5
    "class": "post"                                                                               // 6
  }, "\n    ", HTML.DIV({                                                                         // 7
    "class": "post-content"                                                                       // 8
  }, "\n      ", HTML.H3(HTML.A({                                                                 // 9
    href: function() {                                                                            // 10
      return Spacebars.mustache(view.lookup("url"));                                              // 11
    }                                                                                             // 12
  }, Blaze.View("lookup:title", function() {                                                      // 13
    return Spacebars.mustache(view.lookup("title"));                                              // 14
  })), HTML.SPAN(Blaze.View("lookup:domain", function() {                                         // 15
    return Spacebars.mustache(view.lookup("domain"));                                             // 16
  }))), "\n\n    "), "\n      ", HTML.A({                                                         // 17
    href: function() {                                                                            // 18
      return Spacebars.mustache(view.lookup("pathFor"), "postPage");                              // 19
    },                                                                                            // 20
    "class": "discuss btn btn-default"                                                            // 21
  }, "Discuss"), "\n  ");                                                                         // 22
}));                                                                                              // 23
                                                                                                  // 24
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.post_list.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/template.post_list.js                                                   //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("postsList");                                                                // 2
Template["postsList"] = new Template("Template.postsList", (function() {                          // 3
  var view = this;                                                                                // 4
  return HTML.DIV({                                                                               // 5
    "class": "posts"                                                                              // 6
  }, "\n    ", Blaze.Each(function() {                                                            // 7
    return Spacebars.call(view.lookup("posts"));                                                  // 8
  }, function() {                                                                                 // 9
    return [ "\n      ", Spacebars.include(view.lookupTemplate("postItem")), "\n    " ];          // 10
  }), "\n  ");                                                                                    // 11
}));                                                                                              // 12
                                                                                                  // 13
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.post_page.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/template.post_page.js                                                   //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("postPage");                                                                 // 2
Template["postPage"] = new Template("Template.postPage", (function() {                            // 3
  var view = this;                                                                                // 4
  return Spacebars.include(view.lookupTemplate("postItem"));                                      // 5
}));                                                                                              // 6
                                                                                                  // 7
////////////////////////////////////////////////////////////////////////////////////////////////////

},"template.post_submit.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/template.post_submit.js                                                 //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
                                                                                                  // 1
Template.__checkName("postSubmit");                                                               // 2
Template["postSubmit"] = new Template("Template.postSubmit", (function() {                        // 3
  var view = this;                                                                                // 4
  return HTML.Raw('<form class="main form">\n        <div class="form-group">\n            <label class="control-label" for="url">URL</label>\n            <div class="controls">\n                <input name="url" id="url" type="text" value="" placeholder="Your URL" class="form-control">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="control-label" for="title">Title</label>\n            <div class="controls">\n                <input name="title" id="title" type="text" value="" placeholder="Name your post" class="form-control">\n            </div>\n        </div>\n        <input type="submit" value="Submit" class="btn btn-primary">\n    </form>');
}));                                                                                              // 6
                                                                                                  // 7
////////////////////////////////////////////////////////////////////////////////////////////////////

},"post_item.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/post_item.js                                                            //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
Template.postItem.helpers({                                                                       // 1
  domain: function () {                                                                           // 2
    function domain() {                                                                           // 2
      var a = document.createElement('a');                                                        // 3
      a.href = this.url; //this 是模版each的遍历对象                                                      // 4
      return a.hostname;                                                                          // 2
    }                                                                                             //
                                                                                                  //
    return domain;                                                                                //
  }()                                                                                             //
});                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////

},"post_list.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/post_list.js                                                            //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
Template.postsList.helpers({                                                                      // 1
  posts: function () {                                                                            // 2
    function posts() {                                                                            // 2
      return Posts.find();                                                                        // 3
    }                                                                                             //
                                                                                                  //
    return posts;                                                                                 //
  }()                                                                                             //
});                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////

},"post_submit.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/templates/posts/post_submit.js                                                          //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
/**                                                                                               //
 * Created by Administrator on 2016-06-10.                                                        //
 */                                                                                               //
Template.postSubmit.events({                                                                      // 4
    'submit form': function () {                                                                  // 5
        function submitForm(e) {                                                                  // 5
            e.preventDefault();                                                                   // 6
                                                                                                  //
            var post = {                                                                          // 8
                url: $(e.target).find('[name=url]').val(),                                        // 9
                title: $(e.target).find('[name=title]').val()                                     // 10
            };                                                                                    //
                                                                                                  //
            Meteor.call('postInsert', post, function (error, result) {                            // 13
                // 显示错误信息并退出                                                                      //
                if (error) return alert(error.reason);                                            // 15
                // 显示结果，跳转页面                                                                      //
                // if (result.postExists)                                                         //
                //     alert('This link has already been posted（该链接已经存在）');                       //
                Router.go('postPage', { _id: result._id });                                       // 13
            });                                                                                   //
        }                                                                                         //
                                                                                                  //
        return submitForm;                                                                        //
    }()                                                                                           //
});                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////

}}},"helpers":{"config.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/helpers/config.js                                                                       //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
/**                                                                                               //
 * Created by Administrator on 2016-06-10.                                                        //
 */                                                                                               //
//通过用户名注册或者登录                                                                                     //
// Accounts.ui.config({                                                                           //
//     passwordSignupFields: 'USERNAME_ONLY'                                                      //
// })                                                                                             //
////////////////////////////////////////////////////////////////////////////////////////////////////

}},"main.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// client/main.js                                                                                 //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
//Meteor.subscribe('posts');                                                                      //
////////////////////////////////////////////////////////////////////////////////////////////////////

}},"lib":{"router.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// lib/router.js                                                                                  //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
Router.configure({                                                                                // 1
  layoutTemplate: 'layout',                                                                       // 2
  loadingTemplate: 'loading',                                                                     // 3
  notFoundTemplate: 'notFound',                                                                   // 4
  waitOn: function () {                                                                           // 5
    function waitOn() {                                                                           // 5
      return Meteor.subscribe('posts');                                                           // 5
    }                                                                                             //
                                                                                                  //
    return waitOn;                                                                                //
  }()                                                                                             //
});                                                                                               //
                                                                                                  //
Router.route('/', { name: 'postsList' });                                                         // 8
Router.route('/posts/:_id', {                                                                     // 9
  name: 'postPage',                                                                               // 10
  data: function () {                                                                             // 11
    function data() {                                                                             // 11
      return Posts.findOne(this.params._id);                                                      // 12
    }                                                                                             //
                                                                                                  //
    return data;                                                                                  //
  }()                                                                                             //
});                                                                                               //
Router.route('/submit', { name: 'postSubmit' });                                                  // 14
                                                                                                  //
var requireLogin = function requireLogin() {                                                      // 16
  if (!Meteor.user()) {                                                                           // 17
    this.render('accessDenied');                                                                  // 18
    if (Meteor.loggingIn()) {                                                                     // 19
      this.render(this.loadingTemplate);                                                          // 20
    } else {                                                                                      //
      this.render('accessDenied');                                                                // 22
    }                                                                                             //
  } else {                                                                                        //
    this.next();                                                                                  // 25
  }                                                                                               //
};                                                                                                //
// 如果有人输入了像 http://localhost:3000/posts/xyz 这种格式的 URL，xyz 不是一个合法的帖子 _id                           //
Router.onBeforeAction('dataNotFound', { only: 'postPage' });                                      // 29
Router.onBeforeAction(requireLogin, { only: 'postSubmit' });                                      // 30
////////////////////////////////////////////////////////////////////////////////////////////////////

}},"collections":{"posts.js":function(){

////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                //
// collections/posts.js                                                                           //
//                                                                                                //
////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                  //
Posts = new Mongo.Collection('posts');                                                            // 1
Meteor.methods({                                                                                  // 2
    postInsert: function () {                                                                     // 3
        function postInsert(postAttributes) {                                                     // 3
            check(Meteor.userId(), String);                                                       // 4
            check(postAttributes, {                                                               // 5
                title: String,                                                                    // 6
                url: String                                                                       // 7
            });                                                                                   //
            var user = Meteor.user();                                                             // 9
            var post = _.extend(postAttributes, {                                                 // 10
                userId: user._id,                                                                 // 11
                author: user.username,                                                            // 12
                submitted: new Date()                                                             // 13
            });                                                                                   //
            var postId = Posts.insert(post);                                                      // 15
            return {                                                                              // 16
                _id: postId                                                                       // 17
            };                                                                                    //
        }                                                                                         //
                                                                                                  //
        return postInsert;                                                                        //
    }()                                                                                           //
});                                                                                               //
////////////////////////////////////////////////////////////////////////////////////////////////////

}}},{"extensions":[".js",".json",".html",".css"]});
require("./client/templates/application/template.layout.js");
require("./client/templates/application/template.not_found.js");
require("./client/templates/includes/template.access_denied.js");
require("./client/templates/includes/template.header.js");
require("./client/templates/includes/template.loading.js");
require("./client/templates/posts/template.post_item.js");
require("./client/templates/posts/template.post_list.js");
require("./client/templates/posts/template.post_page.js");
require("./client/templates/posts/template.post_submit.js");
require("./lib/router.js");
require("./client/templates/application/layout.js");
require("./client/templates/posts/post_item.js");
require("./client/templates/posts/post_list.js");
require("./client/templates/posts/post_submit.js");
require("./client/helpers/config.js");
require("./collections/posts.js");
require("./client/main.js");