[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\naccountsUIBootstrap3 = Package['ian:accounts-ui-bootstrap-3'].accountsUIBootstrap3;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nIron = Package['iron:core'].Iron;\nAccounts = Package['accounts-base'].Accounts;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"templates\":{\"application\":{\"template.layout.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/application/template.layout.js                                                //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"layout\");                                                                   // 2\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {                                // 3\n  var view = this;                                                                                // 4\n  return HTML.DIV({                                                                               // 5\n    \"class\": \"container\"                                                                          // 6\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", HTML.DIV({     // 7\n    id: \"main\",                                                                                   // 8\n    \"class\": \"row-fluid\"                                                                          // 9\n  }, \"\\n            \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n        \"), \"\\n    \");\n}));                                                                                              // 11\n                                                                                                  // 12\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.not_found.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/application/template.not_found.js                                             //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"notFound\");                                                                 // 2\nTemplate[\"notFound\"] = new Template(\"Template.notFound\", (function() {                            // 3\n  var view = this;                                                                                // 4\n  return HTML.Raw('<div class=\"not-found jumbotron\">\\n        <h2>404</h2>\\n        <p>Sorry, we couldn\\'t find a page at this address. 抱歉，我们无法找到该页面。</p>\\n    </div>');\n}));                                                                                              // 6\n                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"layout.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/application/layout.js                                                         //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n/**                                                                                               //\n * Created by Administrator on 2016-06-10.                                                        //\n */                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"includes\":{\"template.access_denied.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/includes/template.access_denied.js                                            //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"accessDenied\");                                                             // 2\nTemplate[\"accessDenied\"] = new Template(\"Template.accessDenied\", (function() {                    // 3\n  var view = this;                                                                                // 4\n  return HTML.Raw('<div class=\"access-denied jumbotron\">\\n        <h2>Access Denied</h2>\\n        <p>You can\\'t get here! Please log in.</p>\\n    </div>');\n}));                                                                                              // 6\n                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.header.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/includes/template.header.js                                                   //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"header\");                                                                   // 2\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {                                // 3\n  var view = this;                                                                                // 4\n  return HTML.NAV({                                                                               // 5\n    \"class\": \"navbar navbar-default\",                                                             // 6\n    role: \"navigation\"                                                                            // 7\n  }, \"\\n        \", HTML.DIV({                                                                     // 8\n    \"class\": \"navbar-header\"                                                                      // 9\n  }, \"\\n            \", HTML.Raw('<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navigation\">\\n                <span class=\"sr-only\">Toggle navigation</span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n            </button>'), \"\\n            \", HTML.A({\n    \"class\": \"navbar-brand\",                                                                      // 11\n    href: function() {                                                                            // 12\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postsList\");                             // 13\n    }                                                                                             // 14\n  }, \"Microscope\"), \"\\n        \"), \"\\n        \", HTML.DIV({                                       // 15\n    \"class\": \"collapse navbar-collapse\",                                                          // 16\n    id: \"navigation\"                                                                              // 17\n  }, \"\\n            \", HTML.UL({                                                                  // 18\n    \"class\": \"nav navbar-nav navbar-right\"                                                        // 19\n  }, \"\\n                \", Blaze.If(function() {                                                  // 20\n    return Spacebars.call(view.lookup(\"currentUser\"));                                            // 21\n  }, function() {                                                                                 // 22\n    return HTML.LI(HTML.A({                                                                       // 23\n      href: function() {                                                                          // 24\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"postSubmit\");                          // 25\n      }                                                                                           // 26\n    }, \"Submit Post\"));                                                                           // 27\n  }), \"\\n            \"), \"\\n            \", HTML.UL({                                              // 28\n    \"class\": \"nav navbar-nav navbar-right\"                                                        // 29\n  }, \"\\n                \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));                                                                                              // 31\n                                                                                                  // 32\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.loading.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/includes/template.loading.js                                                  //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"loading\");                                                                  // 2\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {                              // 3\n  var view = this;                                                                                // 4\n  return \"loading````\";                                                                           // 5\n}));                                                                                              // 6\n                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"posts\":{\"template.post_item.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/template.post_item.js                                                   //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"postItem\");                                                                 // 2\nTemplate[\"postItem\"] = new Template(\"Template.postItem\", (function() {                            // 3\n  var view = this;                                                                                // 4\n  return HTML.DIV({                                                                               // 5\n    \"class\": \"post\"                                                                               // 6\n  }, \"\\n    \", HTML.DIV({                                                                         // 7\n    \"class\": \"post-content\"                                                                       // 8\n  }, \"\\n      \", HTML.H3(HTML.A({                                                                 // 9\n    href: function() {                                                                            // 10\n      return Spacebars.mustache(view.lookup(\"url\"));                                              // 11\n    }                                                                                             // 12\n  }, Blaze.View(\"lookup:title\", function() {                                                      // 13\n    return Spacebars.mustache(view.lookup(\"title\"));                                              // 14\n  })), HTML.SPAN(Blaze.View(\"lookup:domain\", function() {                                         // 15\n    return Spacebars.mustache(view.lookup(\"domain\"));                                             // 16\n  }))), \"\\n\\n    \"), \"\\n      \", HTML.A({                                                         // 17\n    href: function() {                                                                            // 18\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postPage\");                              // 19\n    },                                                                                            // 20\n    \"class\": \"discuss btn btn-default\"                                                            // 21\n  }, \"Discuss\"), \"\\n  \");                                                                         // 22\n}));                                                                                              // 23\n                                                                                                  // 24\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.post_list.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/template.post_list.js                                                   //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"postsList\");                                                                // 2\nTemplate[\"postsList\"] = new Template(\"Template.postsList\", (function() {                          // 3\n  var view = this;                                                                                // 4\n  return HTML.DIV({                                                                               // 5\n    \"class\": \"posts\"                                                                              // 6\n  }, \"\\n    \", Blaze.Each(function() {                                                            // 7\n    return Spacebars.call(view.lookup(\"posts\"));                                                  // 8\n  }, function() {                                                                                 // 9\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"postItem\")), \"\\n    \" ];          // 10\n  }), \"\\n  \");                                                                                    // 11\n}));                                                                                              // 12\n                                                                                                  // 13\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.post_page.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/template.post_page.js                                                   //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"postPage\");                                                                 // 2\nTemplate[\"postPage\"] = new Template(\"Template.postPage\", (function() {                            // 3\n  var view = this;                                                                                // 4\n  return Spacebars.include(view.lookupTemplate(\"postItem\"));                                      // 5\n}));                                                                                              // 6\n                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.post_submit.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/template.post_submit.js                                                 //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n                                                                                                  // 1\nTemplate.__checkName(\"postSubmit\");                                                               // 2\nTemplate[\"postSubmit\"] = new Template(\"Template.postSubmit\", (function() {                        // 3\n  var view = this;                                                                                // 4\n  return HTML.Raw('<form class=\"main form\">\\n        <div class=\"form-group\">\\n            <label class=\"control-label\" for=\"url\">URL</label>\\n            <div class=\"controls\">\\n                <input name=\"url\" id=\"url\" type=\"text\" value=\"\" placeholder=\"Your URL\" class=\"form-control\">\\n            </div>\\n        </div>\\n        <div class=\"form-group\">\\n            <label class=\"control-label\" for=\"title\">Title</label>\\n            <div class=\"controls\">\\n                <input name=\"title\" id=\"title\" type=\"text\" value=\"\" placeholder=\"Name your post\" class=\"form-control\">\\n            </div>\\n        </div>\\n        <input type=\"submit\" value=\"Submit\" class=\"btn btn-primary\">\\n    </form>');\n}));                                                                                              // 6\n                                                                                                  // 7\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"post_item.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/post_item.js                                                            //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nTemplate.postItem.helpers({                                                                       // 1\n  domain: function () {                                                                           // 2\n    function domain() {                                                                           // 2\n      var a = document.createElement('a');                                                        // 3\n      a.href = this.url; //this 是模版each的遍历对象                                                      // 4\n      return a.hostname;                                                                          // 2\n    }                                                                                             //\n                                                                                                  //\n    return domain;                                                                                //\n  }()                                                                                             //\n});                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"post_list.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/post_list.js                                                            //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nTemplate.postsList.helpers({                                                                      // 1\n  posts: function () {                                                                            // 2\n    function posts() {                                                                            // 2\n      return Posts.find();                                                                        // 3\n    }                                                                                             //\n                                                                                                  //\n    return posts;                                                                                 //\n  }()                                                                                             //\n});                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"post_submit.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/templates/posts/post_submit.js                                                          //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n/**                                                                                               //\n * Created by Administrator on 2016-06-10.                                                        //\n */                                                                                               //\nTemplate.postSubmit.events({                                                                      // 4\n    'submit form': function () {                                                                  // 5\n        function submitForm(e) {                                                                  // 5\n            e.preventDefault();                                                                   // 6\n                                                                                                  //\n            var post = {                                                                          // 8\n                url: $(e.target).find('[name=url]').val(),                                        // 9\n                title: $(e.target).find('[name=title]').val()                                     // 10\n            };                                                                                    //\n                                                                                                  //\n            Meteor.call('postInsert', post, function (error, result) {                            // 13\n                // 显示错误信息并退出                                                                      //\n                if (error) return alert(error.reason);                                            // 15\n                Router.go('postPage', { _id: result._id });                                       // 17\n            });                                                                                   //\n        }                                                                                         //\n                                                                                                  //\n        return submitForm;                                                                        //\n    }()                                                                                           //\n});                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"helpers\":{\"config.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/helpers/config.js                                                                       //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n/**                                                                                               //\n * Created by Administrator on 2016-06-10.                                                        //\n */                                                                                               //\n//通过用户名注册或者登录                                                                                     //\n// Accounts.ui.config({                                                                           //\n//     passwordSignupFields: 'USERNAME_ONLY'                                                      //\n// })                                                                                             //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"main.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// client/main.js                                                                                 //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\n//Meteor.subscribe('posts');                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lib\":{\"router.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// lib/router.js                                                                                  //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nRouter.configure({                                                                                // 1\n  layoutTemplate: 'layout',                                                                       // 2\n  loadingTemplate: 'loading',                                                                     // 3\n  notFoundTemplate: 'notFound',                                                                   // 4\n  waitOn: function () {                                                                           // 5\n    function waitOn() {                                                                           // 5\n      return Meteor.subscribe('posts');                                                           // 5\n    }                                                                                             //\n                                                                                                  //\n    return waitOn;                                                                                //\n  }()                                                                                             //\n});                                                                                               //\n                                                                                                  //\nRouter.route('/', { name: 'postsList' });                                                         // 8\nRouter.route('/posts/:_id', {                                                                     // 9\n  name: 'postPage',                                                                               // 10\n  data: function () {                                                                             // 11\n    function data() {                                                                             // 11\n      return Posts.findOne(this.params._id);                                                      // 12\n    }                                                                                             //\n                                                                                                  //\n    return data;                                                                                  //\n  }()                                                                                             //\n});                                                                                               //\nRouter.route('/submit', { name: 'postSubmit' });                                                  // 14\n                                                                                                  //\nvar requireLogin = function requireLogin() {                                                      // 16\n  if (!Meteor.user()) {                                                                           // 17\n    this.render('accessDenied');                                                                  // 18\n    if (Meteor.loggingIn()) {                                                                     // 19\n      this.render(this.loadingTemplate);                                                          // 20\n    } else {                                                                                      //\n      this.render('accessDenied');                                                                // 22\n    }                                                                                             //\n  } else {                                                                                        //\n    this.next();                                                                                  // 25\n  }                                                                                               //\n};                                                                                                //\n// 如果有人输入了像 http://localhost:3000/posts/xyz 这种格式的 URL，xyz 不是一个合法的帖子 _id                           //\nRouter.onBeforeAction('dataNotFound', { only: 'postPage' });                                      // 29\nRouter.onBeforeAction(requireLogin, { only: 'postSubmit' });                                      // 30\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"collections\":{\"posts.js\":function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                //\n// collections/posts.js                                                                           //\n//                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                  //\nPosts = new Mongo.Collection('posts');                                                            // 1\nMeteor.methods({                                                                                  // 2\n    postInsert: function () {                                                                     // 3\n        function postInsert(postAttributes) {                                                     // 3\n            check(Meteor.userId(), String);                                                       // 4\n            check(postAttributes, {                                                               // 5\n                title: String,                                                                    // 6\n                url: String                                                                       // 7\n            });                                                                                   //\n            var user = Meteor.user();                                                             // 9\n            var post = _.extend(postAttributes, {                                                 // 10\n                userId: user._id,                                                                 // 11\n                author: user.username,                                                            // 12\n                submitted: new Date()                                                             // 13\n            });                                                                                   //\n            var postId = Posts.insert(post);                                                      // 15\n            return {                                                                              // 16\n                _id: postId                                                                       // 17\n            };                                                                                    //\n        }                                                                                         //\n                                                                                                  //\n        return postInsert;                                                                        //\n    }()                                                                                           //\n});                                                                                               //\n////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\",\".css\"]});\nrequire(\"./client/templates/application/template.layout.js\");\nrequire(\"./client/templates/application/template.not_found.js\");\nrequire(\"./client/templates/includes/template.access_denied.js\");\nrequire(\"./client/templates/includes/template.header.js\");\nrequire(\"./client/templates/includes/template.loading.js\");\nrequire(\"./client/templates/posts/template.post_item.js\");\nrequire(\"./client/templates/posts/template.post_list.js\");\nrequire(\"./client/templates/posts/template.post_page.js\");\nrequire(\"./client/templates/posts/template.post_submit.js\");\nrequire(\"./lib/router.js\");\nrequire(\"./client/templates/application/layout.js\");\nrequire(\"./client/templates/posts/post_item.js\");\nrequire(\"./client/templates/posts/post_list.js\");\nrequire(\"./client/templates/posts/post_submit.js\");\nrequire(\"./client/helpers/config.js\");\nrequire(\"./collections/posts.js\");\nrequire(\"./client/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/templates/application/template.layout.js","/client/templates/application/template.not_found.js","/client/templates/includes/template.access_denied.js","/client/templates/includes/template.header.js","/client/templates/includes/template.loading.js","/client/templates/posts/template.post_item.js","/client/templates/posts/template.post_list.js","/client/templates/posts/template.post_page.js","/client/templates/posts/template.post_submit.js","/client/templates/posts/post_item.js","/client/templates/posts/post_list.js","/client/templates/posts/post_submit.js","/lib/router.js","/collections/posts.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uG;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uG;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uG;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uG;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,sG;;;;;;;;;;;ACNA,SAAS,QAAT,CAAkB,OAAlB,CAA0B;AACxB;AAAQ,sBAAW;AACjB,UAAI,IAAI,SAAS,aAAT,CAAuB,GAAvB,CAAJ,CADa;AAEjB,QAAE,IAAF,GAAS,KAAK,GAAL;AAFQ,aAGV,EAAE,QAAF,CAHU;KAAX;;;KAAR;CADF,mG;;;;;;;;;;;ACAA,SAAS,SAAT,CAAmB,OAAnB,CAA2B;AACzB;AAAO,qBAAW;AAChB,aAAO,MAAM,IAAN,EAAP,CADgB;KAAX;;;KAAP;CADF,mG;;;;;;;;;;;;;;ACGA,SAAS,UAAT,CAAoB,MAApB,CAA2B;AACvB;AAAe,4BAAS,CAAT,EAAY;AACvB,cAAE,cAAF,GADuB;;AAGvB,gBAAI,OAAO;AACP,qBAAK,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,YAAjB,EAA+B,GAA/B,EAAL;AACA,uBAAO,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,cAAjB,EAAiC,GAAjC,EAAP;aAFA,CAHmB;;AAQvB,mBAAO,IAAP,CAAY,YAAZ,EAA0B,IAA1B,EAAgC,UAAS,KAAT,EAAgB,MAAhB,EAAwB;;AAEpD,oBAAI,KAAJ,EACI,OAAO,MAAM,MAAM,MAAN,CAAb,CADJ;AAEA,uBAAO,EAAP,CAAU,UAAV,EAAsB,EAAC,KAAK,OAAO,GAAP,EAA5B,EAJoD;aAAxB,CAAhC,CARuB;SAAZ;;;OAAf;CADJ,mG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA,OAAO,SAAP,CAAiB;AACf,kBAAgB,QAAhB;AACA,mBAAiB,SAAjB;AACA,oBAAkB,UAAlB;AACA;AAAQ,sBAAW;AAAE,aAAO,OAAO,SAAP,CAAiB,OAAjB,CAAP,CAAF;KAAX;;;KAAR;CAJF;;AAOA,OAAO,KAAP,CAAa,GAAb,EAAkB,EAAC,MAAM,WAAN,EAAnB;AACA,OAAO,KAAP,CAAa,aAAb,EAA4B;AAC1B,QAAM,UAAN;AACA;AAAM,oBAAW;AACf,aAAO,MAAM,OAAN,CAAc,KAAK,MAAL,CAAY,GAAZ,CAArB,CADe;KAAX;;;KAAN;CAFF;AAKA,OAAO,KAAP,CAAa,SAAb,EAAwB,EAAC,MAAM,YAAN,EAAzB;;AAEA,IAAI,eAAe,SAAf,YAAe,GAAW;AAC5B,MAAI,CAAE,OAAO,IAAP,EAAF,EAAiB;AACnB,SAAK,MAAL,CAAY,cAAZ,EADmB;AAEnB,QAAI,OAAO,SAAP,EAAJ,EAAwB;AACtB,WAAK,MAAL,CAAY,KAAK,eAAL,CAAZ,CADsB;KAAxB,MAEO;AACL,WAAK,MAAL,CAAY,cAAZ,EADK;KAFP;GAFF,MAOO;AACL,SAAK,IAAL,GADK;GAPP;CADiB;;AAanB,OAAO,cAAP,CAAsB,cAAtB,EAAsC,EAAC,MAAM,UAAN,EAAvC;AACA,OAAO,cAAP,CAAsB,YAAtB,EAAoC,EAAC,MAAM,YAAN,EAArC,6C;;;;;;;;;;;AC7BA,QAAQ,IAAI,MAAM,UAAN,CAAiB,OAArB,CAAR;AACA,OAAO,OAAP,CAAe;AACX;AAAY,4BAAS,cAAT,EAAyB;AACjC,kBAAM,OAAO,MAAP,EAAN,EAAuB,MAAvB,EADiC;AAEjC,kBAAM,cAAN,EAAsB;AAClB,uBAAO,MAAP;AACA,qBAAK,MAAL;aAFJ,EAFiC;AAMjC,gBAAI,OAAO,OAAO,IAAP,EAAP,CAN6B;AAOjC,gBAAI,OAAO,EAAE,MAAF,CAAS,cAAT,EAAyB;AAChC,wBAAQ,KAAK,GAAL;AACR,wBAAQ,KAAK,QAAL;AACR,2BAAW,IAAI,IAAJ,EAAX;aAHO,CAAP,CAP6B;AAYjC,gBAAI,SAAS,MAAM,MAAN,CAAa,IAAb,CAAT,CAZ6B;AAajC,mBAAO;AACH,qBAAK,MAAL;aADJ,CAbiC;SAAzB;;;OAAZ;CADJ,mG","file":"/app.js","sourcesContent":["\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", HTML.DIV({\n    id: \"main\",\n    \"class\": \"row-fluid\"\n  }, \"\\n            \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n        \"), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"notFound\");\nTemplate[\"notFound\"] = new Template(\"Template.notFound\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"not-found jumbotron\">\\n        <h2>404</h2>\\n        <p>Sorry, we couldn\\'t find a page at this address. 抱歉，我们无法找到该页面。</p>\\n    </div>');\n}));\n","\nTemplate.__checkName(\"accessDenied\");\nTemplate[\"accessDenied\"] = new Template(\"Template.accessDenied\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"access-denied jumbotron\">\\n        <h2>Access Denied</h2>\\n        <p>You can\\'t get here! Please log in.</p>\\n    </div>');\n}));\n","\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\",\n    role: \"navigation\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": \"navbar-header\"\n  }, \"\\n            \", HTML.Raw('<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navigation\">\\n                <span class=\"sr-only\">Toggle navigation</span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n                <span class=\"icon-bar\"></span>\\n            </button>'), \"\\n            \", HTML.A({\n    \"class\": \"navbar-brand\",\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postsList\");\n    }\n  }, \"Microscope\"), \"\\n        \"), \"\\n        \", HTML.DIV({\n    \"class\": \"collapse navbar-collapse\",\n    id: \"navigation\"\n  }, \"\\n            \", HTML.UL({\n    \"class\": \"nav navbar-nav navbar-right\"\n  }, \"\\n                \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"postSubmit\");\n      }\n    }, \"Submit Post\"));\n  }), \"\\n            \"), \"\\n            \", HTML.UL({\n    \"class\": \"nav navbar-nav navbar-right\"\n  }, \"\\n                \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"loading\");\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {\n  var view = this;\n  return \"loading````\";\n}));\n","\nTemplate.__checkName(\"postItem\");\nTemplate[\"postItem\"] = new Template(\"Template.postItem\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"post\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"post-content\"\n  }, \"\\n      \", HTML.H3(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), HTML.SPAN(Blaze.View(\"lookup:domain\", function() {\n    return Spacebars.mustache(view.lookup(\"domain\"));\n  }))), \"\\n\\n    \"), \"\\n      \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postPage\");\n    },\n    \"class\": \"discuss btn btn-default\"\n  }, \"Discuss\"), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"postsList\");\nTemplate[\"postsList\"] = new Template(\"Template.postsList\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"posts\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"posts\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"postItem\")), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"postPage\");\nTemplate[\"postPage\"] = new Template(\"Template.postPage\", (function() {\n  var view = this;\n  return Spacebars.include(view.lookupTemplate(\"postItem\"));\n}));\n","\nTemplate.__checkName(\"postSubmit\");\nTemplate[\"postSubmit\"] = new Template(\"Template.postSubmit\", (function() {\n  var view = this;\n  return HTML.Raw('<form class=\"main form\">\\n        <div class=\"form-group\">\\n            <label class=\"control-label\" for=\"url\">URL</label>\\n            <div class=\"controls\">\\n                <input name=\"url\" id=\"url\" type=\"text\" value=\"\" placeholder=\"Your URL\" class=\"form-control\">\\n            </div>\\n        </div>\\n        <div class=\"form-group\">\\n            <label class=\"control-label\" for=\"title\">Title</label>\\n            <div class=\"controls\">\\n                <input name=\"title\" id=\"title\" type=\"text\" value=\"\" placeholder=\"Name your post\" class=\"form-control\">\\n            </div>\\n        </div>\\n        <input type=\"submit\" value=\"Submit\" class=\"btn btn-primary\">\\n    </form>');\n}));\n","Template.postItem.helpers({\n  domain: function() {\n    var a = document.createElement('a');\n    a.href = this.url;//this 是模版each的遍历对象\n    return a.hostname;\n  }\n});","Template.postsList.helpers({\n  posts: function() {\n    return Posts.find();\n  }\n});","/**\r\n * Created by Administrator on 2016-06-10.\r\n */\r\nTemplate.postSubmit.events({\r\n    'submit form': function(e) {\r\n        e.preventDefault();\r\n\r\n        var post = {\r\n            url: $(e.target).find('[name=url]').val(),\r\n            title: $(e.target).find('[name=title]').val()\r\n        };\r\n\r\n        Meteor.call('postInsert', post, function(error, result) {\r\n            // 显示错误信息并退出\r\n            if (error)\r\n                return alert(error.reason);\r\n            Router.go('postPage', {_id: result._id});\r\n        });\r\n    }\r\n});","Router.configure({\n  layoutTemplate: 'layout',\n  loadingTemplate: 'loading',\n  notFoundTemplate: 'notFound',\n  waitOn: function() { return Meteor.subscribe('posts'); }\n});\n\nRouter.route('/', {name: 'postsList'});\nRouter.route('/posts/:_id', {\n  name: 'postPage',\n  data: function() {\n    return Posts.findOne(this.params._id);}\n});\nRouter.route('/submit', {name: 'postSubmit'});\n\nvar requireLogin = function() {\n  if (! Meteor.user()) {\n    this.render('accessDenied');\n    if (Meteor.loggingIn()) {\n      this.render(this.loadingTemplate);\n    } else {\n      this.render('accessDenied');\n    }\n  } else {\n    this.next();\n  }\n}\n// 如果有人输入了像 http://localhost:3000/posts/xyz 这种格式的 URL，xyz 不是一个合法的帖子 _id\nRouter.onBeforeAction('dataNotFound', {only: 'postPage'});\nRouter.onBeforeAction(requireLogin, {only: 'postSubmit'});","Posts = new Mongo.Collection('posts');\r\nMeteor.methods({\r\n    postInsert: function(postAttributes) {\r\n        check(Meteor.userId(), String);\r\n        check(postAttributes, {\r\n            title: String,\r\n            url: String\r\n        });\r\n        var user = Meteor.user();\r\n        var post = _.extend(postAttributes, {\r\n            userId: user._id,\r\n            author: user.username,\r\n            submitted: new Date()\r\n        });\r\n        var postId = Posts.insert(post);\r\n        return {\r\n            _id: postId\r\n        };\r\n    }\r\n});"]}}]