{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/lib/notifications.js","filenameRelative":"/lib/notifications.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/lib/notifications.js.map","sourceFileName":"/lib/notifications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"notifications"},"ignored":false,"code":"/**\r\n * Created by Administrator on 2016-06-12.\r\n */\nNotifications = new Mongo.Collection('notifications');\n\nNotifications.allow({\n    update: function () {\n        function update(userId, doc, fieldNames) {\n            return ownsDocument(userId, doc) && fieldNames.length === 1 && fieldNames[0] === 'read';\n        }\n\n        return update;\n    }()\n});\n\ncreateCommentNotification = function createCommentNotification(comment) {\n    var post = Posts.findOne(comment.postId);\n    if (comment.userId !== post.userId) {\n        Notifications.insert({\n            userId: post.userId,\n            postId: post._id,\n            commentId: comment._id,\n            commenterName: comment.author,\n            read: false\n        });\n    }\n};","ast":null,"map":{"version":3,"sources":["/lib/notifications.js"],"names":[],"mappings":";;;AAGA,gBAAgB,IAAI,MAAM,UAAN,CAAiB,eAArB,CAAhB;;AAEA,cAAc,KAAd,CAAoB;AAChB;AAAQ,wBAAS,MAAT,EAAiB,GAAjB,EAAsB,UAAtB,EAAkC;AACtC,mBAAO,aAAa,MAAb,EAAqB,GAArB,KACH,WAAW,MAAX,KAAsB,CAAtB,IAA2B,WAAW,CAAX,MAAkB,MAAlB,CAFO;SAAlC;;;OAAR;CADJ;;AAOA,4BAA4B,mCAAS,OAAT,EAAkB;AAC1C,QAAI,OAAO,MAAM,OAAN,CAAc,QAAQ,MAAR,CAArB,CADsC;AAE1C,QAAI,QAAQ,MAAR,KAAmB,KAAK,MAAL,EAAa;AAChC,sBAAc,MAAd,CAAqB;AACjB,oBAAQ,KAAK,MAAL;AACR,oBAAQ,KAAK,GAAL;AACR,uBAAW,QAAQ,GAAR;AACX,2BAAe,QAAQ,MAAR;AACf,kBAAM,KAAN;SALJ,EADgC;KAApC;CAFwB","file":"/lib/notifications.js.map","sourcesContent":["/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nNotifications = new Mongo.Collection('notifications');\r\n\r\nNotifications.allow({\r\n    update: function(userId, doc, fieldNames) {\r\n        return ownsDocument(userId, doc) &&\r\n            fieldNames.length === 1 && fieldNames[0] === 'read';\r\n    }\r\n});\r\n\r\ncreateCommentNotification = function(comment) {\r\n    var post = Posts.findOne(comment.postId);\r\n    if (comment.userId !== post.userId) {\r\n        Notifications.insert({\r\n            userId: post.userId,\r\n            postId: post._id,\r\n            commentId: comment._id,\r\n            commenterName: comment.author,\r\n            read: false\r\n        });\r\n    }\r\n};"]},"hash":"3c3424f4163fc3bceb5bac4fe2c9e62b2c29556b"}
