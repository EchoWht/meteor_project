{"version":3,"sources":["meteor://💻app/client/templates/application/template.layout.js","meteor://💻app/client/templates/application/template.not_found.js","meteor://💻app/client/templates/application/layout.js","meteor://💻app/client/templates/comments/template.comment_item.js","meteor://💻app/client/templates/comments/template.comment_submit.js","meteor://💻app/client/templates/comments/comment_item.js","meteor://💻app/client/templates/comments/comment_submit.js","meteor://💻app/client/templates/includes/template.access_denied.js","meteor://💻app/client/templates/includes/template.errors.js","meteor://💻app/client/templates/includes/template.header.js","meteor://💻app/client/templates/includes/template.loading.js","meteor://💻app/client/templates/includes/errors.js","meteor://💻app/client/templates/includes/header.js","meteor://💻app/client/templates/notifications/template.notifications.js","meteor://💻app/client/templates/notifications/notifications.js","meteor://💻app/client/templates/posts/template.post_edit.js","meteor://💻app/client/templates/posts/template.post_item.js","meteor://💻app/client/templates/posts/template.post_list.js","meteor://💻app/client/templates/posts/template.post_page.js","meteor://💻app/client/templates/posts/template.post_submit.js","meteor://💻app/client/templates/posts/post_edit.js","meteor://💻app/client/templates/posts/post_item.js","meteor://💻app/client/templates/posts/post_list.js","meteor://💻app/client/templates/posts/post_page.js","meteor://💻app/client/templates/posts/post_submit.js","meteor://💻app/client/helpers/config.js","meteor://💻app/client/helpers/errors.js","meteor://💻app/client/helpers/spacebars.js","meteor://💻app/lib/comments.js","meteor://💻app/lib/notifications.js","meteor://💻app/lib/permissions.js","meteor://💻app/lib/router.js","meteor://💻app/collections/posts.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;;;;ACHA,SAAS,MAAT,CAAgB,UAAhB,CAA2B,YAAW;AAClC,SAAK,IAAL,CAAU,OAAV,EAAmB,QAAnB,GAA8B;AAC1B;AAAe,mCAAS,IAAT,EAAe,IAAf,EAAqB;AAChC,kBAAE,IAAF,EACK,IADL,GAEK,YAFL,CAEkB,IAFlB,EAGK,MAHL,GADgC;aAArB;;;WAAf;AAMA;AAAe,mCAAS,IAAT,EAAe;AAC1B,kBAAE,IAAF,EAAQ,OAAR,CAAgB,YAAW;AACvB,sBAAE,IAAF,EAAQ,MAAR,GADuB;iBAAX,CAAhB,CAD0B;aAAf;;;WAAf;KAPJ,CADkC;CAAX,CAA3B,qH;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;ACrBA,SAAS,WAAT,CAAqB,OAArB,CAA6B;AACzB;AAAe,iCAAW;AACtB,mBAAO,KAAK,SAAL,CAAe,QAAf,EAAP,CADsB;SAAX;;;OAAf;CADJ,sH;;;;;;;;;;;;;;ACAA,SAAS,aAAT,CAAuB,SAAvB,CAAiC,YAAW;AACxC,YAAQ,GAAR,CAAY,qBAAZ,EAAmC,EAAnC,EADwC;CAAX,CAAjC;;AAIA,SAAS,aAAT,CAAuB,OAAvB,CAA+B;AAC3B;AAAc,8BAAS,KAAT,EAAgB;AAC1B,mBAAO,QAAQ,GAAR,CAAY,qBAAZ,EAAmC,KAAnC,CAAP,CAD0B;SAAhB;;;OAAd;AAGA;AAAY,4BAAU,KAAV,EAAiB;AACzB,mBAAO,CAAC,CAAC,QAAQ,GAAR,CAAY,qBAAZ,EAAmC,KAAnC,CAAD,GAA6C,WAA9C,GAA4D,EAA5D,CADkB;SAAjB;;;OAAZ;CAJJ;;AASA,SAAS,aAAT,CAAuB,MAAvB,CAA8B;AAC1B;AAAe,4BAAS,CAAT,EAAY,QAAZ,EAAsB;AACjC,cAAE,cAAF,GADiC;;AAGjC,gBAAI,QAAQ,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,aAAjB,CAAR,CAH6B;AAIjC,gBAAI,UAAU;AACV,sBAAM,MAAM,GAAN,EAAN;AACA,wBAAQ,SAAS,IAAT,CAAc,GAAd;aAFR,CAJ6B;;AASjC,gBAAI,SAAS,EAAT,CAT6B;AAUjC,gBAAI,CAAE,QAAQ,IAAR,EAAc;AAChB,uBAAO,IAAP,GAAc,2BAAd,CADgB;AAEhB,uBAAO,QAAQ,GAAR,CAAY,qBAAZ,EAAmC,MAAnC,CAAP,CAFgB;aAApB;;AAKA,mBAAO,IAAP,CAAY,eAAZ,EAA6B,OAA7B,EAAsC,UAAS,KAAT,EAAgB,SAAhB,EAA2B;AAC7D,oBAAI,KAAJ,EAAU;AACN,+BAAW,MAAM,MAAN,CAAX,CADM;iBAAV,MAEO;AACH,0BAAM,GAAN,CAAU,EAAV,EADG;iBAFP;aADkC,CAAtC,CAfiC;SAAtB;;;OAAf;CADJ,sH;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA,yH;;;;;;;;;;;;;;ACHA,SAAS,MAAT,CAAgB,OAAhB,CAAwB;AACpB;AAAQ,0BAAW;AACf,mBAAO,OAAO,IAAP,EAAP,CADe;SAAX;;;OAAR;CADJ;AAKA,SAAS,KAAT,CAAe,UAAf,CAA0B,YAAW;AACjC,QAAI,QAAQ,KAAK,IAAL,CADqB;AAEjC,WAAO,UAAP,CAAkB,YAAY;AAC1B,eAAO,MAAP,CAAc,MAAM,GAAN,CAAd,CAD0B;KAAZ,EAEf,IAFH,EAFiC;CAAX,CAA1B,qH;;;;;;;;;;;;;;ACLA,SAAS,MAAT,CAAgB,OAAhB,CAAwB;AACpB;AAAkB,qDAA4B;AAC1C,gBAAI,OAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,EAAsC,CAAtC,CAAP,CADsC;AAE1C,iBAAK,GAAL,GAF0C;;AAI1C,gBAAI,SAAS,EAAE,GAAF,CAAM,IAAN,EAAY,UAAS,IAAT,EAAe;AACpC,uBAAO,OAAO,OAAP,MAAoB,OAAO,OAAP,GAAiB,KAAjB,CAAuB,OAAvB,OAAqC,IAArC,CADS;aAAf,CAArB,CAJsC;;AAQ1C,mBAAO,UAAU,QAAV,CARmC;SAA5B;;;OAAlB;CADJ,sH;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;;;;ACvCA,SAAS,aAAT,CAAuB,OAAvB,CAA+B;AAC3B;AAAe,iCAAW;AACtB,mBAAO,cAAc,IAAd,CAAmB,EAAC,QAAQ,OAAO,MAAP,EAAR,EAAyB,MAAM,KAAN,EAA7C,CAAP,CADsB;SAAX;;;OAAf;AAGA;AAAmB,qCAAU;AACzB,mBAAO,cAAc,IAAd,CAAmB,EAAC,QAAQ,OAAO,MAAP,EAAR,EAAyB,MAAM,KAAN,EAA7C,EAA2D,KAA3D,EAAP,CADyB;SAAV;;;OAAnB;CAJJ;;AASA,SAAS,gBAAT,CAA0B,OAA1B,CAAkC;AAC9B;AAAsB,wCAAW;AAC7B,mBAAO,OAAO,MAAP,CAAc,QAAd,CAAuB,IAAvB,CAA4B,EAAC,KAAK,KAAK,MAAL,EAAlC,CAAP,CAD6B;SAAX;;;OAAtB;CADJ;;AAMA,SAAS,gBAAT,CAA0B,MAA1B,CAAiC;AAC7B;AAAW,0BAAW;AAClB,0BAAc,MAAd,CAAqB,KAAK,GAAL,EAAU,EAAC,MAAM,EAAC,MAAM,IAAN,EAAP,EAAhC,EADkB;SAAX;;;OAAX;CADJ,sH;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0H;;;;;;;;;;;AC5BA,SAAS,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","file":"/app.js","sourcesContent":["\nTemplate.__checkName(\"layout\");\nTemplate[\"layout\"] = new Template(\"Template.layout\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n\\n        \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n        \", Spacebars.include(view.lookupTemplate(\"errors\")), \"\\n        \", HTML.DIV({\n    id: \"main\",\n    \"class\": \"row-fluid\"\n  }, \"\\n            \", Spacebars.include(view.lookupTemplate(\"yield\")), \"\\n        \"), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"notFound\");\nTemplate[\"notFound\"] = new Template(\"Template.notFound\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"not-found jumbotron\">\\n        <h2>404</h2>\\n        <p>Sorry, we couldn\\'t find a page at this address. 抱歉，我们无法找到该页面。</p>\\n    </div>');\n}));\n","/**\r\n * Created by Administrator on 2016-06-10.\r\n */\r\nTemplate.layout.onRendered(function() {\r\n    this.find('#main')._uihooks = {\r\n        insertElement: function(node, next) {\r\n            $(node)\r\n                .hide()\r\n                .insertBefore(next)\r\n                .fadeIn();\r\n        },\r\n        removeElement: function(node) {\r\n            $(node).fadeOut(function() {\r\n                $(this).remove();\r\n            });\r\n        }\r\n    }\r\n});","\nTemplate.__checkName(\"commentItem\");\nTemplate[\"commentItem\"] = new Template(\"Template.commentItem\", (function() {\n  var view = this;\n  return HTML.LI(\"\\n        \", HTML.H4(\"\\n            \", HTML.SPAN({\n    \"class\": \"author\"\n  }, Blaze.View(\"lookup:author\", function() {\n    return Spacebars.mustache(view.lookup(\"author\"));\n  })), \"\\n            \", HTML.SPAN({\n    \"class\": \"date\"\n  }, \"on \", Blaze.View(\"lookup:submittedText\", function() {\n    return Spacebars.mustache(view.lookup(\"submittedText\"));\n  })), \"\\n        \"), \"\\n        \", HTML.P(Blaze.View(\"lookup:body\", function() {\n    return Spacebars.mustache(view.lookup(\"body\"));\n  })), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"commentSubmit\");\nTemplate[\"commentSubmit\"] = new Template(\"Template.commentSubmit\", (function() {\n  var view = this;\n  return HTML.FORM({\n    name: \"comment\",\n    \"class\": \"comment-form form\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": function() {\n      return [ \"form-group \", Spacebars.mustache(view.lookup(\"errorClass\"), \"body\") ];\n    }\n  }, \"\\n            \", HTML.DIV({\n    \"class\": \"controls\"\n  }, \"\\n                \", HTML.Raw('<label for=\"body\">Comment on this post</label>'), \"\\n                \", HTML.TEXTAREA({\n    name: \"body\",\n    id: \"body\",\n    \"class\": \"form-control\",\n    rows: \"3\"\n  }), \"\\n                \", HTML.SPAN({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:errorMessage\", function() {\n    return Spacebars.mustache(view.lookup(\"errorMessage\"), \"body\");\n  })), \"\\n            \"), \"\\n        \"), HTML.Raw('\\n        <button type=\"submit\" class=\"btn btn-primary\">Add Comment</button>\\n    '));\n}));\n","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.commentItem.helpers({\r\n    submittedText: function() {\r\n        return this.submitted.toString();\r\n    }\r\n});","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.commentSubmit.onCreated(function() {\r\n    Session.set('commentSubmitErrors', {});\r\n});\r\n\r\nTemplate.commentSubmit.helpers({\r\n    errorMessage: function(field) {\r\n        return Session.get('commentSubmitErrors')[field];\r\n    },\r\n    errorClass: function (field) {\r\n        return !!Session.get('commentSubmitErrors')[field] ? 'has-error' : '';\r\n    }\r\n});\r\n\r\nTemplate.commentSubmit.events({\r\n    'submit form': function(e, template) {\r\n        e.preventDefault();\r\n\r\n        var $body = $(e.target).find('[name=body]');\r\n        var comment = {\r\n            body: $body.val(),\r\n            postId: template.data._id\r\n        };\r\n\r\n        var errors = {};\r\n        if (! comment.body) {\r\n            errors.body = \"Please write some content\";\r\n            return Session.set('commentSubmitErrors', errors);\r\n        }\r\n\r\n        Meteor.call('commentInsert', comment, function(error, commentId) {\r\n            if (error){\r\n                throwError(error.reason);\r\n            } else {\r\n                $body.val('');\r\n            }\r\n        });\r\n    }\r\n});","\nTemplate.__checkName(\"accessDenied\");\nTemplate[\"accessDenied\"] = new Template(\"Template.accessDenied\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"access-denied jumbotron\">\\n        <h2>Access Denied</h2>\\n        <p>You can\\'t get here! Please log in.</p>\\n    </div>');\n}));\n","\nTemplate.__checkName(\"errors\");\nTemplate[\"errors\"] = new Template(\"Template.errors\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"errors\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"errors\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"error\")), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n\nTemplate.__checkName(\"error\");\nTemplate[\"error\"] = new Template(\"Template.error\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"alert alert-danger\",\n    role: \"alert\"\n  }, HTML.Raw('\\n        <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\\n        '), Blaze.View(\"lookup:message\", function() {\n    return Spacebars.mustache(view.lookup(\"message\"));\n  }), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.NAV({\n    \"class\": \"navbar navbar-default\",\n    role: \"navigation\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n            \", HTML.DIV({\n    \"class\": \"navbar-header\"\n  }, \"\\n                \", HTML.Raw('<button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navigation\">\\n                    <span class=\"sr-only\">Toggle navigation</span>\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                    <span class=\"icon-bar\"></span>\\n                </button>'), \"\\n                \", HTML.A({\n    \"class\": \"navbar-brand\",\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"home\");\n    }\n  }, \"Microscope\"), \"\\n            \"), \"\\n            \", HTML.DIV({\n    \"class\": \"collapse navbar-collapse\",\n    id: \"navigation\"\n  }, \"\\n                \", HTML.UL({\n    \"class\": \"nav navbar-nav\"\n  }, \"\\n                    \", HTML.LI({\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"activeRouteClass\"), \"home\", \"newPosts\");\n    }\n  }, \"\\n                        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"newPosts\");\n    }\n  }, \"New\"), \"\\n                    \"), \"\\n                    \", HTML.LI({\n    \"class\": function() {\n      return Spacebars.mustache(view.lookup(\"activeRouteClass\"), \"bestPosts\");\n    }\n  }, \"\\n                        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"bestPosts\");\n    }\n  }, \"Best\"), \"\\n                    \"), \"\\n                    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n                        \", HTML.LI({\n      \"class\": function() {\n        return Spacebars.mustache(view.lookup(\"activeRouteClass\"), \"postSubmit\");\n      }\n    }, \"\\n                            \", HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"postSubmit\");\n      }\n    }, \"Submit Post\"), \"\\n                        \"), \"\\n                        \", HTML.LI({\n      \"class\": \"dropdown\"\n    }, \"\\n                            \", Spacebars.include(view.lookupTemplate(\"notifications\")), \"\\n                        \"), \"\\n                    \" ];\n  }), \"\\n                \"), \"\\n                \", HTML.UL({\n    \"class\": \"nav navbar-nav navbar-right\"\n  }, \"\\n                    \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n                \"), \"\\n            \"), \"\\n        \"), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"loading\");\nTemplate[\"loading\"] = new Template(\"Template.loading\", (function() {\n  var view = this;\n  return \"loading````\";\n}));\n","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.errors.helpers({\r\n    errors: function() {\r\n        return Errors.find();\r\n    }\r\n});\r\nTemplate.error.onRendered(function() {\r\n    var error = this.data;\r\n    Meteor.setTimeout(function () {\r\n        Errors.remove(error._id);\r\n    }, 3000);\r\n});","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.header.helpers({\r\n    activeRouteClass: function(/* route names */) {\r\n        var args = Array.prototype.slice.call(arguments, 0);\r\n        args.pop();\r\n\r\n        var active = _.any(args, function(name) {\r\n            return Router.current() && Router.current().route.getName() === name\r\n        });\r\n\r\n        return active && 'active';\r\n    }\r\n});","\nTemplate.__checkName(\"notifications\");\nTemplate[\"notifications\"] = new Template(\"Template.notifications\", (function() {\n  var view = this;\n  return [ HTML.A({\n    href: \"#\",\n    \"class\": \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\"\n  }, \"\\n        Notifications\\n        \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"notificationCount\"));\n  }, function() {\n    return [ \"\\n            \", HTML.SPAN({\n      \"class\": \"badge badge-inverse\"\n    }, Blaze.View(\"lookup:notificationCount\", function() {\n      return Spacebars.mustache(view.lookup(\"notificationCount\"));\n    })), \"\\n        \" ];\n  }), \"\\n        \", HTML.Raw('<b class=\"caret\"></b>'), \"\\n    \"), \"\\n    \", HTML.UL({\n    \"class\": \"notification dropdown-menu\"\n  }, \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"notificationCount\"));\n  }, function() {\n    return [ \"\\n            \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"notifications\"));\n    }, function() {\n      return [ \"\\n                \", Spacebars.include(view.lookupTemplate(\"notificationItem\")), \"\\n            \" ];\n    }), \"\\n        \" ];\n  }, function() {\n    return [ \"\\n            \", HTML.LI(HTML.SPAN(\"No Notifications\")), \"\\n        \" ];\n  }), \"\\n    \") ];\n}));\n\nTemplate.__checkName(\"notificationItem\");\nTemplate[\"notificationItem\"] = new Template(\"Template.notificationItem\", (function() {\n  var view = this;\n  return HTML.LI(\"\\n        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"notificationPostPath\"));\n    }\n  }, \"\\n            \", HTML.STRONG(Blaze.View(\"lookup:commenterName\", function() {\n    return Spacebars.mustache(view.lookup(\"commenterName\"));\n  })), \" commented on your post\\n        \"), \"\\n    \");\n}));\n","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.notifications.helpers({\r\n    notifications: function() {\r\n        return Notifications.find({userId: Meteor.userId(), read: false});\r\n    },\r\n    notificationCount: function(){\r\n        return Notifications.find({userId: Meteor.userId(), read: false}).count();\r\n    }\r\n});\r\n\r\nTemplate.notificationItem.helpers({\r\n    notificationPostPath: function() {\r\n        return Router.routes.postPage.path({_id: this.postId});\r\n    }\r\n});\r\n\r\nTemplate.notificationItem.events({\r\n    'click a': function() {\r\n        Notifications.update(this._id, {$set: {read: true}});\r\n    }\r\n});","\nTemplate.__checkName(\"postEdit\");\nTemplate[\"postEdit\"] = new Template(\"Template.postEdit\", (function() {\n  var view = this;\n  return HTML.FORM({\n    \"class\": \"main form\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": function() {\n      return [ \"form-group \", Spacebars.mustache(view.lookup(\"errorClass\"), \"url\") ];\n    }\n  }, \"\\n            \", HTML.Raw('<label class=\"control-label\" for=\"url\">URL</label>'), \"\\n            \", HTML.DIV({\n    \"class\": \"controls\"\n  }, \"\\n                \", HTML.INPUT({\n    name: \"url\",\n    id: \"url\",\n    type: \"text\",\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    },\n    placeholder: \"Your URL\",\n    \"class\": \"form-control\"\n  }), \"\\n                \", HTML.SPAN({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:errorMessage\", function() {\n    return Spacebars.mustache(view.lookup(\"errorMessage\"), \"url\");\n  })), \"\\n            \"), \"\\n        \"), \"\\n        \", HTML.DIV({\n    \"class\": function() {\n      return [ \"form-group \", Spacebars.mustache(view.lookup(\"errorClass\"), \"title\") ];\n    }\n  }, \"\\n            \", HTML.Raw('<label class=\"control-label\" for=\"title\">Title</label>'), \"\\n            \", HTML.DIV({\n    \"class\": \"controls\"\n  }, \"\\n                \", HTML.INPUT({\n    name: \"title\",\n    id: \"title\",\n    type: \"text\",\n    value: function() {\n      return Spacebars.mustache(view.lookup(\"title\"));\n    },\n    placeholder: \"Name your post\",\n    \"class\": \"form-control\"\n  }), \"\\n                \", HTML.SPAN({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:errorMessage\", function() {\n    return Spacebars.mustache(view.lookup(\"errorMessage\"), \"title\");\n  })), \"\\n            \"), \"\\n        \"), HTML.Raw('\\n        <input type=\"submit\" value=\"Submit\" class=\"btn btn-primary submit\">\\n        <hr>\\n        <a class=\"btn btn-danger delete\" href=\"#\">Delete post</a>\\n    '));\n}));\n","\nTemplate.__checkName(\"postItem\");\nTemplate[\"postItem\"] = new Template(\"Template.postItem\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"post\"\n  }, \"\\n    \", HTML.A({\n    href: \"#\",\n    \"class\": function() {\n      return [ \"upvote btn btn-default \", Spacebars.mustache(view.lookup(\"upvotedClass\")) ];\n    }\n  }, HTML.Raw('<span class=\"glyphicon glyphicon-thumbs-up\"></span>')), \"\\n    \", HTML.DIV({\n    \"class\": \"post-content\"\n  }, \"\\n        \", HTML.H3(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), HTML.SPAN(Blaze.View(\"lookup:domain\", function() {\n    return Spacebars.mustache(view.lookup(\"domain\"));\n  }))), \"\\n        \", HTML.P(\"\\n            \", Blaze.View(\"lookup:pluralize\", function() {\n    return Spacebars.mustache(view.lookup(\"pluralize\"), view.lookup(\"votes\"), \"Vote\");\n  }), \",\\n            submitted by \", Blaze.View(\"lookup:author\", function() {\n    return Spacebars.mustache(view.lookup(\"author\"));\n  }), \",\\n            \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postPage\");\n    }\n  }, Blaze.View(\"lookup:pluralize\", function() {\n    return Spacebars.mustache(view.lookup(\"pluralize\"), view.lookup(\"commentsCount\"), \"comment\");\n  })), \"\\n            \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"ownPost\"));\n  }, function() {\n    return HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), \"postEdit\");\n      }\n    }, \"Edit\");\n  }), \"\\n        \"), \"\\n    \"), \"\\n    \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), \"postPage\");\n    },\n    \"class\": \"discuss btn btn-default\"\n  }, \"Discuss\"), \"\\n\");\n}));\n","\nTemplate.__checkName(\"postsList\");\nTemplate[\"postsList\"] = new Template(\"Template.postsList\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"posts\"\n  }, \"\\n      \", HTML.DIV({\n    \"class\": \"wrapper\"\n  }, \"\\n          \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"posts\"));\n  }, function() {\n    return [ \"\\n              \", Spacebars.include(view.lookupTemplate(\"postItem\")), \"\\n          \" ];\n  }), \"\\n      \"), \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"nextPath\"));\n  }, function() {\n    return [ \"\\n          \", HTML.A({\n      \"class\": \"load-more\",\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"nextPath\"));\n      }\n    }, \"Load more\"), \"\\n          \" ];\n  }, function() {\n    return [ \"\\n          \", HTML.P({\n      \"class\": \"bg-info\"\n    }, \"没有更多了·····\"), \"\\n\\n      \" ];\n  }), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"postPage\");\nTemplate[\"postPage\"] = new Template(\"Template.postPage\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"postItem\")), \"\\n    \", HTML.UL({\n    \"class\": \"comments\"\n  }, \"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"comments\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"commentItem\")), \"\\n        \" ];\n  }), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"commentSubmit\")), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.P(\"Please log in to leave a comment.\"), \"\\n    \" ];\n  }) ];\n}));\n","\nTemplate.__checkName(\"postSubmit\");\nTemplate[\"postSubmit\"] = new Template(\"Template.postSubmit\", (function() {\n  var view = this;\n  return HTML.FORM({\n    \"class\": \"main form\"\n  }, \"\\n        \", HTML.DIV({\n    \"class\": function() {\n      return [ \"form-group \", Spacebars.mustache(view.lookup(\"errorClass\"), \"url\") ];\n    }\n  }, \"\\n            \", HTML.Raw('<label class=\"control-label\" for=\"url\">URL</label>'), \"\\n            \", HTML.DIV({\n    \"class\": \"controls\"\n  }, \"\\n                \", HTML.Raw('<input name=\"url\" id=\"url\" type=\"text\" value=\"\" placeholder=\"Your URL\" class=\"form-control\">'), \"\\n                \", HTML.SPAN({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:errorMessage\", function() {\n    return Spacebars.mustache(view.lookup(\"errorMessage\"), \"url\");\n  })), \"\\n            \"), \"\\n        \"), \"\\n        \", HTML.DIV({\n    \"class\": function() {\n      return [ \"form-group \", Spacebars.mustache(view.lookup(\"errorClass\"), \"title\") ];\n    }\n  }, \"\\n            \", HTML.Raw('<label class=\"control-label\" for=\"title\">Title</label>'), \"\\n            \", HTML.DIV({\n    \"class\": \"controls\"\n  }, \"\\n                \", HTML.Raw('<input name=\"title\" id=\"title\" type=\"text\" value=\"\" placeholder=\"Name your post\" class=\"form-control\">'), \"\\n                \", HTML.SPAN({\n    \"class\": \"help-block\"\n  }, Blaze.View(\"lookup:errorMessage\", function() {\n    return Spacebars.mustache(view.lookup(\"errorMessage\"), \"title\");\n  })), \"\\n            \"), \"\\n        \"), HTML.Raw('\\n        <input type=\"submit\" value=\"Submit\" class=\"btn btn-primary\">\\n    '));\n}));\n","Template.postEdit.onCreated(function() {\r\n    Session.set('postEditErrors', {});\r\n});\r\nTemplate.postEdit.helpers({\r\n    errorMessage: function(field) {\r\n        return Session.get('postEditErrors')[field];\r\n    },\r\n    errorClass: function (field) {\r\n        return !!Session.get('postEditErrors')[field] ? 'has-error' : '';\r\n    }\r\n});\r\n\r\nTemplate.postEdit.events({\r\n    'submit form': function(e) {\r\n        e.preventDefault();\r\n\r\n        var currentPostId = this._id;\r\n\r\n        var postProperties = {\r\n            url: $(e.target).find('[name=url]').val(),\r\n            title: $(e.target).find('[name=title]').val()\r\n        }\r\n\r\n        var errors = validatePost(postProperties);\r\n        if (errors.title || errors.url)\r\n            return Session.set('postEditErrors', errors);\r\n\r\n        Posts.update(currentPostId, {$set: postProperties}, function(error) {\r\n            if (error) {\r\n                // 向用户显示错误消息\r\n                throwError(error.reason);\r\n            } else {\r\n                Router.go('postPage', {_id: currentPostId});\r\n            }\r\n        });\r\n    },\r\n\r\n    'click .delete': function(e) {\r\n        e.preventDefault();\r\n\r\n        if (confirm(\"Delete this post?\")) {\r\n            var currentPostId = this._id;\r\n            Posts.remove(currentPostId);\r\n            Router.go('home');\r\n        }\r\n    }\r\n});","Template.postItem.helpers({\n  ownPost: function() {\n    return this.userId === Meteor.userId();\n  },\n  domain: function() {\n    var a = document.createElement('a');\n    a.href = this.url;//this 是模版each的遍历对象\n    return a.hostname;\n  },\n  commentsCount: function() {\n    return Comments.find({postId: this._id}).count();\n  },\n  upvotedClass: function() {\n    var userId = Meteor.userId();\n    if (userId && !_.include(this.upvoters, userId)) {\n      return 'btn-primary upvotable';\n    } else {\n      return 'disabled';\n    }\n  }\n});\nTemplate.postItem.events({\n  'click .upvotable': function(e) {\n    e.preventDefault();\n    Meteor.call('upvote', this._id);\n  }\n});\n","Template.postsList.helpers({\n  // posts: function() {\n  //   return Posts.find({},{sort:{submitted:-1}});\n  // }\n});\nTemplate.postsList.onRendered(function () {\n    this.find('.wrapper')._uihooks = {\n        insertElement: function (node, next) {\n            $(node)\n                .hide()\n                .insertBefore(next)\n                .fadeIn();\n        },\n        moveElement: function (node, next) {\n            var $node = $(node), $next = $(next);\n            var oldTop = $node.offset().top;\n            var height = $node.outerHeight(true);\n\n            // 找出 next 与 node 之间所有的元素\n            var $inBetween = $next.nextUntil(node);\n            if ($inBetween.length === 0)\n                $inBetween = $node.nextUntil(next);\n\n            // 把 node 放在预订位置\n            $node.insertBefore(next);\n\n            // 测量新 top 偏移坐标\n            var newTop = $node.offset().top;\n\n            // 将 node *移回*至原始所在位置\n            $node\n                .removeClass('animate')\n                .css('top', oldTop - newTop);\n\n            // push every other element down (or up) to put them back\n            $inBetween\n                .removeClass('animate')\n                .css('top', oldTop < newTop ? height : -1 * height);\n\n            // 强制重绘\n            $node.offset();\n\n            // 动画，重置所有元素的 top 坐标为 0\n            $node.addClass('animate').css('top', 0);\n            $inBetween.addClass('animate').css('top', 0);\n        },removeElement: function(node) {\n            $(node).fadeOut(function() {\n                $(this).remove();\n            });\n        }\n    }\n});","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nTemplate.postPage.helpers({\r\n    comments: function() {\r\n        return Comments.find({postId: this._id});\r\n    }\r\n});","/**\r\n * Created by Administrator on 2016-06-10.\r\n */\r\nTemplate.postSubmit.onCreated(function() {\r\n    Session.set('postSubmitErrors', {});\r\n});\r\nTemplate.postSubmit.helpers({\r\n    errorMessage: function(field) {\r\n        return Session.get('postSubmitErrors')[field];\r\n    },\r\n    errorClass: function (field) {\r\n        return !!Session.get('postSubmitErrors')[field] ? 'has-error' : '';\r\n    }\r\n});\r\nTemplate.postSubmit.events({\r\n    'submit form': function(e) {\r\n        e.preventDefault();\r\n\r\n        var post = {\r\n            url: $(e.target).find('[name=url]').val(),\r\n            title: $(e.target).find('[name=title]').val()\r\n        };\r\n        var errors = validatePost(post);\r\n        if (errors.title || errors.url)\r\n            return Session.set('postSubmitErrors', errors);\r\n        Meteor.call('postInsert', post, function(error, result) {\r\n            // 显示错误信息并退出\r\n            if (error)\r\n                return throwError(error.reason);\r\n            // 显示结果，跳转页面\r\n            if (result.postExists)\r\n                return throwError('链接已存在');;\r\n            Router.go('postPage', {_id: result._id});\r\n        });\r\n    }\r\n});","/**\r\n * Created by Administrator on 2016-06-10.\r\n */\r\n//通过用户名注册或者登录\r\nAccounts.ui.config({\r\n    passwordSignupFields: 'USERNAME_ONLY'\r\n})","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nErrors = new Mongo.Collection(null);\r\nthrowError = function(message) {\r\n    Errors.insert({message: message});\r\n};","UI.registerHelper('pluralize', function(n, thing) {\r\n    // fairly stupid pluralizer\r\n    if (n === 1) {\r\n        return '1 ' + thing;\r\n    } else {\r\n        return n + ' ' + thing + 's';\r\n    }\r\n});\r\n/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\n","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nComments = new Mongo.Collection('comments');\r\nMeteor.methods({\r\n    commentInsert: function(commentAttributes) {\r\n        check(this.userId, String);\r\n        check(commentAttributes, {\r\n            postId: String,\r\n            body: String\r\n        });\r\n        var user = Meteor.user();\r\n        var post = Posts.findOne(commentAttributes.postId);\r\n        if (!post)\r\n            throw new Meteor.Error('invalid-comment', 'You must comment on a post');\r\n        comment = _.extend(commentAttributes, {\r\n            userId: user._id,\r\n            author: user.username,\r\n            submitted: new Date()\r\n        });\r\n        // 更新帖子的评论数\r\n        Posts.update(comment.postId, {$inc: {commentsCount: 1}});\r\n        // return Comments.insert(comment);\r\n        // create the comment, save the id\r\n        comment._id = Comments.insert(comment);\r\n        // now create a notification, informing the user that there's been a comment\r\n        createCommentNotification(comment);\r\n        return comment._id;\r\n    }\r\n});","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nNotifications = new Mongo.Collection('notifications');\r\n\r\nNotifications.allow({\r\n    update: function(userId, doc, fieldNames) {\r\n        return ownsDocument(userId, doc) &&\r\n            fieldNames.length === 1 && fieldNames[0] === 'read';\r\n    }\r\n});\r\n\r\ncreateCommentNotification = function(comment) {\r\n    var post = Posts.findOne(comment.postId);\r\n    if (comment.userId !== post.userId) {\r\n        Notifications.insert({\r\n            userId: post.userId,\r\n            postId: post._id,\r\n            commentId: comment._id,\r\n            commenterName: comment.author,\r\n            read: false\r\n        });\r\n    }\r\n};","/**\r\n * Created by Administrator on 2016-06-12.\r\n */\r\nownsDocument = function(userId, doc) {\r\n    return doc && doc.userId === userId;\r\n}","Router.configure({\n  layoutTemplate: 'layout',\n  loadingTemplate: 'loading',\n  notFoundTemplate: 'notFound',\n  waitOn: function() {\n    return [Meteor.subscribe('notifications')]\n  }\n});\nPostsListController = RouteController.extend({\n  template: 'postsList',\n  increment: 5,\n  postsLimit: function() {\n    return parseInt(this.params.postsLimit) || this.increment;\n  },\n  findOptions: function() {\n    return {sort: this.sort, limit: this.postsLimit()};\n  },\n  subscriptions: function() {\n    this.postsSub = Meteor.subscribe('posts', this.findOptions());\n  },\n  posts: function() {\n    return Posts.find({}, this.findOptions());\n  },\n  data: function() {\n    var hasMore = this.posts().count() === this.postsLimit();\n    return {\n      posts: this.posts(),\n      ready: this.postsSub.ready,\n      nextPath: hasMore ? this.nextPath() : null\n    };\n  }\n});\nNewPostsController = PostsListController.extend({\n  sort: {submitted: -1, _id: -1},\n  nextPath: function() {\n    return Router.routes.newPosts.path({postsLimit: this.postsLimit() + this.increment})\n  }\n});\nBestPostsController = PostsListController.extend({\n  sort: {votes: -1, submitted: -1, _id: -1},\n  nextPath: function() {\n    return Router.routes.bestPosts.path({postsLimit: this.postsLimit() + this.increment})\n  }\n});\nRouter.route('/', {\n  name: 'home',\n  controller: NewPostsController\n});\nRouter.route('/new/:postsLimit?', {name: 'newPosts'});\nRouter.route('/best/:postsLimit?', {name: 'bestPosts'});\nRouter.route('/posts/:_id', {\n  name: 'postPage',\n  waitOn: function() {\n    return [\n      Meteor.subscribe('singlePost', this.params._id),\n      Meteor.subscribe('comments', this.params._id)\n    ];\n  },\n  data: function() { return Posts.findOne(this.params._id); }\n});\n\nRouter.route('/posts/:_id/edit', {\n  name: 'postEdit',\n  waitOn: function() {\n    return Meteor.subscribe('singlePost', this.params._id);\n  },\n  data: function() { return Posts.findOne(this.params._id); }\n});\n\nRouter.route('/submit', {name: 'postSubmit'});\n\nRouter.route('/:postsLimit?', {\n  name: 'postsList',\n});\n\nvar requireLogin = function() {\n  if (! Meteor.user()) {\n    if (Meteor.loggingIn()) {\n      this.render(this.loadingTemplate);\n    } else {\n      this.render('accessDenied');\n    }\n  } else {\n    this.next();\n  }\n}\n\nRouter.onBeforeAction('dataNotFound', {only: 'postPage'});\nRouter.onBeforeAction(requireLogin, {only: 'postSubmit'});","Posts = new Mongo.Collection('posts');\r\nvalidatePost = function (post) {\r\n    var errors = {};\r\n    if (!post.title)\r\n        errors.title = \"请填写标题\";\r\n    if (!post.url)\r\n        errors.url =  \"请填写 URL\";\r\n    return errors;\r\n};\r\n/*允许用户编辑*/\r\nPosts.allow({\r\n    update: function(userId, post) { return ownsDocument(userId, post); },\r\n    remove: function(userId, post) { return ownsDocument(userId, post); }\r\n});\r\n/*限制用户编辑的字段*/\r\nPosts.deny({\r\n    update: function(userId, post, fieldNames) {\r\n        // 只能更改如下两个字段：\r\n        return (_.without(fieldNames, 'url', 'title').length > 0);\r\n    }\r\n});\r\n/*修改*/\r\nPosts.deny({\r\n    update: function(userId, post, fieldNames, modifier) {\r\n        var errors = validatePost(modifier.$set);\r\n        return errors.title || errors.url;\r\n    }\r\n});\r\nMeteor.methods({\r\n    postInsert: function(postAttributes) {\r\n        check(Meteor.userId(), String);\r\n        check(postAttributes, {\r\n            title: String,\r\n            url: String\r\n        });\r\n        /*防止用户通过控制台来插入数据*/\r\n         var errors = validatePost(postAttributes);\r\n        if (errors.title || errors.url)\r\n            throw new Meteor.Error('invalid-post', \"你必须为你的帖子填写标题和 URL\");\r\n        /*防止重复*/\r\n        var postWithSameLink = Posts.findOne({url: postAttributes.url});\r\n        if (postWithSameLink) {\r\n            return {\r\n                postExists: true,\r\n                _id: postWithSameLink._id\r\n            }\r\n        }\r\n\r\n        var user = Meteor.user();\r\n        var post = _.extend(postAttributes, {\r\n            userId: user._id,\r\n            author: user.username,\r\n            submitted: new Date(),\r\n            commentsCount: 0,\r\n            upvoters: [],\r\n            votes: 0\r\n        });\r\n        var postId = Posts.insert(post);\r\n        return {\r\n            _id: postId\r\n        };\r\n\r\n    },\r\n    upvote: function(postId) {\r\n        check(this.userId, String);\r\n        check(postId, String);\r\n\r\n        var affected = Posts.update({\r\n            _id: postId,\r\n            upvoters: {$ne: this.userId}\r\n        }, {\r\n            $addToSet: {upvoters: this.userId},\r\n            $inc: {votes: 1}\r\n        });\r\n        if (! affected)\r\n            throw new Meteor.Error('invalid', \"You weren't able to upvote that post\");\r\n    }\r\n});"]}