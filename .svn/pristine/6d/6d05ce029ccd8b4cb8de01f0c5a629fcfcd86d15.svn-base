{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/collections/posts.js","filenameRelative":"/collections/posts.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/collections/posts.js.map","sourceFileName":"/collections/posts.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"posts"},"ignored":false,"code":"Posts = new Mongo.Collection('posts');\nMeteor.methods({\n    postInsert: function () {\n        function postInsert(postAttributes) {\n            check(Meteor.userId(), String);\n            check(postAttributes, {\n                title: String,\n                url: String\n            });\n            /*防止url重复*/\n            // var postWithSameLink = Posts.findOne({url: postAttributes.url});\n            // if (postWithSameLink) {\n            //     return {\n            //         postExists: true,\n            //         _id: postWithSameLink._id\n            //     }\n            // }\n            var user = Meteor.user();\n            var post = _.extend(postAttributes, {\n                userId: user._id,\n                author: user.username,\n                submitted: new Date()\n            });\n            var postId = Posts.insert(post);\n            return {\n                _id: postId\n            };\n        }\n\n        return postInsert;\n    }()\n});","ast":null,"map":{"version":3,"sources":["/collections/posts.js"],"names":[],"mappings":"AAAA,QAAQ,IAAI,MAAM,UAAN,CAAiB,OAArB,CAAR;AACA,OAAO,OAAP,CAAe;AACX;AAAY,4BAAS,cAAT,EAAyB;AACjC,kBAAM,OAAO,MAAP,EAAN,EAAuB,MAAvB,EADiC;AAEjC,kBAAM,cAAN,EAAsB;AAClB,uBAAO,MAAP;AACA,qBAAK,MAAL;aAFJ;;;;;;;;;AAFiC,gBAc7B,OAAO,OAAO,IAAP,EAAP,CAd6B;AAejC,gBAAI,OAAO,EAAE,MAAF,CAAS,cAAT,EAAyB;AAChC,wBAAQ,KAAK,GAAL;AACR,wBAAQ,KAAK,QAAL;AACR,2BAAW,IAAI,IAAJ,EAAX;aAHO,CAAP,CAf6B;AAoBjC,gBAAI,SAAS,MAAM,MAAN,CAAa,IAAb,CAAT,CApB6B;AAqBjC,mBAAO;AACH,qBAAK,MAAL;aADJ,CArBiC;SAAzB;;;OAAZ;CADJ","file":"/collections/posts.js.map","sourcesContent":["Posts = new Mongo.Collection('posts');\r\nMeteor.methods({\r\n    postInsert: function(postAttributes) {\r\n        check(Meteor.userId(), String);\r\n        check(postAttributes, {\r\n            title: String,\r\n            url: String\r\n        });\r\n        /*防止url重复*/\r\n        // var postWithSameLink = Posts.findOne({url: postAttributes.url});\r\n        // if (postWithSameLink) {\r\n        //     return {\r\n        //         postExists: true,\r\n        //         _id: postWithSameLink._id\r\n        //     }\r\n        // }\r\n        var user = Meteor.user();\r\n        var post = _.extend(postAttributes, {\r\n            userId: user._id,\r\n            author: user.username,\r\n            submitted: new Date()\r\n        });\r\n        var postId = Posts.insert(post);\r\n        return {\r\n            _id: postId\r\n        };\r\n    }\r\n});"]},"hash":"fa6f3ecc457e49941843b4bc779a2caa2bd91cc2"}
